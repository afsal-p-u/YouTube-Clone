!function(){"use strict";const t={activity:{icon:'<svg class="icon" width="17" height="17" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.425 10.495a.663.663 0 01-.942 0l-.88-.879c-.184 3.621-3.033 6.409-6.647 6.409a.667.667 0 010-1.334c2.855 0 5.114-2.183 5.312-5.038l-.842.842a.665.665 0 01-.942 0 .664.664 0 010-.941l2-2v-.002a.67.67 0 01.47-.194.675.675 0 01.47.193l.002.002 2 2a.664.664 0 010 .942zm-2.763-3.893a.667.667 0 01-.91-.244c-1.39-2.406-4.284-3.434-6.962-2.575l.987.265a.667.667 0 01-.345 1.288L3.803 4.63a.659.659 0 01-.483-.615.654.654 0 01.052-.352l.663-2.477a.667.667 0 011.288.345l-.298 1.114c3.401-1.262 7.12-.006 8.88 3.046a.667.667 0 01-.243.911zM2.144 10.531a5.415 5.415 0 002.346 3.207l-.234-.875a.667.667 0 111.288-.344l.703 2.629a.667.667 0 01-.471.816l-2.627.704a.668.668 0 01-.345-1.288l1.24-.333-.031-.018c-1.566-.903-2.688-2.38-3.158-4.157a6.81 6.81 0 01.677-5.18.666.666 0 111.154.666 5.486 5.486 0 00-.542 4.173z"/></svg>',periods:["daily","weekly","monthly"],title:"Activity",description:"usage-metrics-activity-description"},feedback:{icon:'<svg class="icon" width="17" height="17" viewBox="0 0 17 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.983 12.691H4.275l-2.467 3.083a.667.667 0 01-1.187-.416V3.996A2.641 2.641 0 013.26 1.358h10.723a2.64 2.64 0 012.638 2.638v6.057a2.64 2.64 0 01-2.638 2.638zm1.305-8.695c0-.72-.586-1.305-1.305-1.305H3.26c-.72 0-1.306.586-1.306 1.305v9.462l1.48-1.85c.008-.01.02-.013.028-.023.031-.035.068-.06.106-.089.033-.024.064-.05.1-.067.036-.018.075-.025.114-.036.046-.012.09-.025.138-.027.012-.001.022-.008.034-.008h10.03c.718 0 1.304-.585 1.304-1.305V3.996zm-3.5 4.695H5.455c-.7 0-1.267-.298-1.267-.666 0-.368.568-.667 1.267-.667h6.335c.699 0 1.267.299 1.267.667 0 .368-.568.666-1.267.666zm0-2.643H5.454c-.7 0-1.267-.299-1.267-.667 0-.368.567-.666 1.267-.666h6.334c.7 0 1.267.298 1.267.666 0 .368-.567.667-1.267.667z"/></svg>',periods:["monthly"],title:"Feedback",description:"usage-metrics-feedback-description"},query:{icon:'<svg class="icon" width="18" height="17" viewBox="0 0 18 17" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.827 7.23c.26-.26.682-.26.943 0l1.51 1.51c.11-.028.223-.049.341-.049a1.335 1.335 0 010 2.667 1.335 1.335 0 01-1.333-1.333c0-.119.02-.232.05-.342l-1.511-1.51a.667.667 0 010-.942zm9.265-2.067L16.064 6.19a6.62 6.62 0 011.224 3.834 6.674 6.674 0 01-6.667 6.666 6.677 6.677 0 01-4.968-2.22.667.667 0 01.994-.89 5.34 5.34 0 003.974 1.777 5.34 5.34 0 005.333-5.333 5.34 5.34 0 00-5.333-5.334 5.33 5.33 0 00-4.055 1.87.666.666 0 11-1.012-.867 6.654 6.654 0 014.4-2.3v-1.37h-.666a.667.667 0 010-1.333h2.667a.666.666 0 110 1.334h-.667v1.367a6.62 6.62 0 013.167 1.19l1.028-1.029c.26-.26.683-.26.943 0l.666.667c.26.26.26.683 0 .943zM4.622 8.69H1.288a.667.667 0 110-1.333h3.333a.667.667 0 010 1.333zm-2.001.667h4a.667.667 0 010 1.333h-4a.667.667 0 010-1.333zm.667 2h2a.666.666 0 110 1.333h-2a.667.667 0 110-1.333z"/></svg>',title:"Query Count",description:"usage-metrics-querycount-description",periods:["daily"],acum:t=>(t||0)+1,withTiming:!0},retention:{},gmix:{periods:["daily"]},indepscore:{instant:!0},optout:{instant:!0},optin:{instant:!0}},e="installts",n=t=>{try{return JSON.parse(localStorage.getItem(t))}catch{return null}},o=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch{}},i=t=>{try{localStorage.removeItem(t)}catch{}},r=()=>{const t=localStorage.length,e=[];for(let n=0;n<t;n++)e.push(localStorage.key(n));return e},a="usageMetrics.";function c(t){return`usageMetrics.${t}`}function s(t){return n(c(t))}function l(t,e){o(c(t),e)}function u(t){i(c(t))}function d(t){return null!==n(c(t))}function f(){return d(e)||l(e,Date.now()),s(e)}function g(){return"1"===function(){if(document.cookie){let t=document.cookie.split(";").map((t=>t.trim())).map((t=>t.split("=")));const e={};for(let n=0;n<t.length;n+=1){let[o,i]=t[n];e[o]=i}return e}return{}}().fallback}function m(t){return function(t,e){return fetch(t,{credentials:"omit",method:"POST",mode:"no-cors",body:JSON.stringify(e),referrerPolicy:"no-referrer",headers:{"Referrer-Policy":"no-referrer"}})}("/api/feedback",t)}function h(){return(new Date).toISOString().slice(0,4)}function p(t){return t.replace(/[.*+?^/${}()|[\]\\]/g,"")}function w(t=Date.now()){return new Date(t).toISOString().slice(0,10)}function v(){const{location:{hash:t}}=window;if(d("channel"))return s("channel");if(t&&t.includes("channel=")){l("channel",function(t){if(t.length>15){const e=p(t.split("?")[0]);return e.length>15?"":e}return p(t)}(t.slice(t.indexOf("channel=")+8)))}else l("channel","");return s("channel")}function y(t){return Math.floor(t/864e5)}function S(){const t=f();return w(y(Date.now()-t)<14?t:function(t=Date.now()){const e=(t=new Date(t)).getDay(),n=t.getDate()-e+(0===e?-6:1);return new Date(t.setDate(n))}(t))}(()=>{if("undefined"==typeof window)return{};const t=window?.document?.getElementById("js-shared")?.getAttribute("data");if(!t)return{};try{JSON.parse(t)}catch(t){return{}}})();const x=["q1","q2"];function D(t,e){const n=`goal.${t}`;if(d(n))return s(n);let o=null;return(JSON.parse(localStorage.getItem("app.indepScore"))||[]).reduce(((t,e)=>t+e[1]),0)>=e&&(o={g:t,date:w()},l(n,o)),o}function b(){const t=[],e=D("q1",3),n=D("q2",10);return null!==e&&t.push(e),null!==n&&t.push(n),t}const{localStorage:k,performance:E}=window,{browser:O,os:$,is_dev:I}=JSON.parse(document.getElementById("js-telemetry").getAttribute("data"));function M(){const t=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","duration","fetchStart","loadEventEnd","loadEventStart","redirectCount","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","workerStart"],e=E?.getEntriesByType("navigation")[0]||{},n={};for(const o of t)n[o]=e[o];const o=e.serverTiming||[];for(const{name:t,duration:e}of o)n[`serverTiming-${t}`]=e;return n}function z(t,e,n,o=!1){const i={type:e,behavior:n,meta:{dev:I,version:5,date:w(),static:{channel:v(),os:$,browser:navigator.brave?"Brave":O,cohort:S()},timing:o?M():void 0},t:2};for(const t of x)if(e.startsWith(`activity_${t}`)){const e=b();i.meta.completed=e.filter((e=>e.g===t)).map((t=>t.date))[0];break}if("query"===t){const t=new URL(window.location.href).searchParams.get("source");i.meta.source=t}return m(i)}function q(e,{suffix:n=[],data:o}={}){if("true"===localStorage.getItem("app.usageMetricsOptOut")&&"optout"!==e)return;const{periods:i=["once"],acum:r=(()=>!0),withTiming:a=!1,instant:c=!1}=t[e],u=`${e}${n.length>0?"_":""}${n.join("_")}`;if(c)return void z(e,u,o,a);const d=`metric_${u}`,f=s(d)||{},g=[];for(const t of i){let{key:e,value:n}=f[t]||{};const i=T[t](e);e!==i&&(n=void 0);const a=r(n,o);a!==n&&g.push([t,a]),f[t]={key:i,value:a}}if(g.length>0){l(d,f);for(const[t,n]of g)z(e,`${u}${t?".":""}${t}`,n,a)}}const T={daily:function(){return`${h()}-${Math.round((new Date-new Date((new Date).getFullYear(),0,0))/864e5)}`},weekly:function(){const t=new Date,e=new Date(t.getFullYear(),0,1);return e.setDate(e.getDate()+(1-e.getDay()%7)),`${h()}-${Math.round((t-e)/6048e5)+1}`},monthly:function(){return w().slice(0,7)},once:()=>""},_=["search","images","news","videos"],B={load:({target:t})=>{const e=t.location.pathname.split("/").slice(1).filter((t=>t)).join("/")||"home";q("activity"),q("activity",{suffix:[e]});const n=b();for(const t of n)q("activity",{suffix:[t.g]});const o=new Date(f());o.setHours(0,0,0,0);const i=y(Date.now()-o.getTime());i>=1&&q("retention",{suffix:["day"]}),i>=7&&q("retention",{suffix:["week"]}),i>=28&&q("retention",{suffix:["month"]}),_.includes(e)&&!function(){if("undefined"==typeof window)return!1;const{performance:t={}}=window;if("reload"===t?.getEntriesByType("navigation")[0]?.type)return!0;const e=t?.navigation?.type;return void 0!==e&&e===t?.navigation?.TYPE_RELOAD}()&&(q("query"),q("query",{suffix:[e]})),g()&&q("gmix")},SearchFeedback:()=>{q("feedback")},OptOutUsageMetrics:()=>q("optout"),OptInUsageMetrics:()=>q("optin"),GmixDismissed:()=>q("gmix",{suffix:["dismissed"]}),GmixEnabled:()=>q("gmix",{suffix:["enabled"]}),GmixDisabled:()=>q("gmix",{suffix:["disabled"]}),GmixShown:()=>q("gmix",{suffix:["shown"]}),Score:t=>q("indepscore",{data:t.detail})};!function(){switch(parseInt(k.getItem("telemetry.version")||s("version"))){case 1:case 2:{!function(t){const e=t.length,o=r();for(const r of o)r.startsWith(t)&&(l(r.slice(e),n(r)),i(r))}("telemetry.");const t=r().filter((t=>t.startsWith(a))).map((t=>t.slice(a.length)));for(const e of t)e.startsWith("metric_query_")&&(_.includes(e.split("_")[2])||u(e));break}}l("version",5)}();for(const t in B)window.addEventListener(t,((...e)=>setTimeout((()=>B[t](...e)),0)));"complete"===document.readyState&&B.load({target:document})}();
